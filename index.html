<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Or√ßamentos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #FF6B35 0%, #FFA500 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .logo-container {
            margin-bottom: 20px;
        }

        .logo {
            width: 250px;
            height: 100px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            object-fit: contain;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #FF6B35;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea {
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #FF6B35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B35 0%, #FFA500 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(86, 171, 47, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(255, 65, 108, 0.3);
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .items-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FFA500 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .items-table td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .items-table tr:hover {
            background: #f8f9fa;
        }

        .total-section {
            background: linear-gradient(135deg, #FF6B35 0%, #FFA500 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: right;
            margin-top: 20px;
        }

        .total-section h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .total-section p {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .items-table {
                font-size: 0.9rem;
            }
            
            .items-table th,
            .items-table td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <img src="https://drive.google.com/uc?export=view&id=1_Rj0dAUGkBMIfDnmw7LxjKa_bWZcNQd0" 
                     alt="Fenix Fardamentos Logo" 
                     class="logo"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div style="display: none; color: white; font-size: 24px; font-weight: bold;">
                    üî• FENIX FARDAMENTOS
                </div>
            </div>
            <h1>Gerador de Or√ßamentos</h1>
            <p>Sistema profissional para cria√ß√£o de or√ßamentos em PDF</p>
        </div>

        <div class="content">
            <!-- Dados da Empresa -->
            <div class="section">
                <h2>üè¢ Dados da Empresa</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="empresaNome">Nome da Empresa *</label>
                        <input type="text" id="empresaNome" value="Fenix Fardamentos LTDA" required>
                    </div>
                    <div class="form-group">
                        <label for="empresaCNPJ">CNPJ</label>
                        <input type="text" id="empresaCNPJ" value="12.000.234/0001-18">
                    </div>
                    <div class="form-group">
                        <label for="empresaEndereco">Endere√ßo</label>
                        <input type="text" id="empresaEndereco" value="Rua Pinheiro, 65 - Cidade Universit√°ria">
                    </div>
                    <div class="form-group">
                        <label for="empresaTelefone">Telefone</label>
                        <input type="text" id="empresaTelefone" value="(82) 98814-4752">
                    </div>
                    <div class="form-group">
                        <label for="empresaEmail">E-mail</label>
                        <input type="email" id="empresaEmail" value="fenixfardamentos.al@gmail.com">
                    </div>
                </div>
            </div>

            <!-- Dados do Cliente -->
            <div class="section">
                <h2>üë§ Dados do Cliente</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="clienteNome">Nome do Cliente *</label>
                        <input type="text" id="clienteNome" placeholder="Nome completo ou empresa" required>
                    </div>
                    <div class="form-group">
                        <label for="clienteEmail">E-mail do Cliente</label>
                        <input type="email" id="clienteEmail" placeholder="cliente@email.com">
                    </div>
                    <div class="form-group">
                        <label for="clienteTelefone">Telefone do Cliente</label>
                        <input type="text" id="clienteTelefone" placeholder="(11) 99999-9999">
                    </div>
                </div>
            </div>

            <!-- Adicionar Itens -->
            <div class="section">
                <h2>üì¶ Adicionar Itens ao Or√ßamento</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="itemDescricao">Descri√ß√£o do Item *</label>
                        <input type="text" id="itemDescricao" placeholder="Ex: Desenvolvimento de website" required>
                    </div>
                    <div class="form-group">
                        <label for="itemQuantidade">Quantidade *</label>
                        <input type="number" id="itemQuantidade" min="1" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="itemValorUnitario">Valor Unit√°rio (R$) *</label>
                        <input type="number" id="itemValorUnitario" step="0.01" min="0" placeholder="0,00" required>
                    </div>
                </div>
                <button type="button" class="btn btn-primary" onclick="adicionarItem()">
                    ‚ûï Adicionar Item
                </button>
            </div>

            <!-- Lista de Itens -->
            <div class="section">
                <h2>üìã Itens do Or√ßamento</h2>
                <div id="itensContainer">
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                        <h3>Nenhum item adicionado</h3>
                        <p>Adicione itens ao or√ßamento usando o formul√°rio acima</p>
                    </div>
                </div>
            </div>

            <!-- Observa√ß√µes -->
            <div class="section">
                <h2>üìù Observa√ß√µes</h2>
                <div class="form-group">
                    <label for="observacoes">Observa√ß√µes Adicionais</label>
                    <textarea id="observacoes" placeholder="Condi√ß√µes de pagamento, prazo de entrega, garantias, etc."></textarea>
                </div>
            </div>

            <!-- Gerar PDF -->
            <div class="section" style="text-align: center;">
                <button type="button" class="btn btn-success" onclick="gerarPDF()" style="font-size: 1.2rem; padding: 15px 30px;">
                    üìÑ Gerar Or√ßamento em PDF
                </button>
            </div>
        </div>
        
        <!-- Indicador de Vers√£o -->
        <div style="position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 15px; font-size: 11px; font-family: monospace; z-index: 1000;">
            v2.2.0
        </div>
    </div>

    <script>
        let itens = [];
        let contadorItens = 0;

        function adicionarItem() {
            const descricao = document.getElementById('itemDescricao').value.trim();
            const quantidade = parseInt(document.getElementById('itemQuantidade').value);
            const valorUnitario = parseFloat(document.getElementById('itemValorUnitario').value);

            if (!descricao || !quantidade || !valorUnitario) {
                alert('Por favor, preencha todos os campos do item.');
                return;
            }

            const item = {
                id: ++contadorItens,
                descricao,
                quantidade,
                valorUnitario,
                valorTotal: quantidade * valorUnitario
            };

            itens.push(item);
            atualizarTabelaItens();
            limparFormularioItem();
        }

        function removerItem(id) {
            itens = itens.filter(item => item.id !== id);
            atualizarTabelaItens();
        }

        function limparFormularioItem() {
            document.getElementById('itemDescricao').value = '';
            document.getElementById('itemQuantidade').value = '1';
            document.getElementById('itemValorUnitario').value = '';
        }

        function atualizarTabelaItens() {
            const container = document.getElementById('itensContainer');
            
            if (itens.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                        <h3>Nenhum item adicionado</h3>
                        <p>Adicione itens ao or√ßamento usando o formul√°rio acima</p>
                    </div>
                `;
                return;
            }

            const totalGeral = itens.reduce((total, item) => total + item.valorTotal, 0);

            container.innerHTML = `
                <table class="items-table">
                    <thead>
                        <tr>
                            <th>Descri√ß√£o</th>
                            <th>Qtd</th>
                            <th>Valor Unit.</th>
                            <th>Total</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${itens.map(item => `
                            <tr>
                                <td>${item.descricao}</td>
                                <td>${item.quantidade}</td>
                                <td>R$ ${item.valorUnitario.toFixed(2).replace('.', ',')}</td>
                                <td>R$ ${item.valorTotal.toFixed(2).replace('.', ',')}</td>
                                <td>
                                    <button class="btn btn-danger" onclick="removerItem(${item.id})">
                                        üóëÔ∏è Remover
                                    </button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                <div class="total-section">
                    <h3>Total Geral</h3>
                    <p>R$ ${totalGeral.toFixed(2).replace('.', ',')}</p>
                </div>
            `;
        }

        function gerarPDF() {
            const empresaNome = document.getElementById('empresaNome').value.trim();
            const clienteNome = document.getElementById('clienteNome').value.trim();

            if (!empresaNome || !clienteNome) {
                alert('Por favor, preencha pelo menos o nome da empresa e do cliente.');
                return;
            }

            if (itens.length === 0) {
                alert('Adicione pelo menos um item ao or√ßamento.');
                return;
            }

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Configura√ß√µes b√°sicas
            const pageWidth = doc.internal.pageSize.width;
            const margin = 20;
            let yPosition = 30;

            // Cabe√ßalho simples
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 0, 0);
            doc.text('OR√áAMENTO', pageWidth / 2, yPosition, { align: 'center' });
            
            yPosition += 20;

            // Dados b√°sicos
            const hoje = new Date();
            const dataFormatada = hoje.toLocaleDateString('pt-BR');
            const numeroOrcamento = `OR√á-${Date.now().toString().slice(-6)}`;
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text(`Data: ${dataFormatada}`, margin, yPosition);
            doc.text(`N√∫mero: ${numeroOrcamento}`, pageWidth - margin, yPosition, { align: 'right' });
            
            yPosition += 25;

            // Dados da empresa
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('DADOS DA EMPRESA:', margin, yPosition);
            yPosition += 10;

            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(empresaNome, margin, yPosition);
            yPosition += 6;

            const empresaCNPJ = document.getElementById('empresaCNPJ').value.trim();
            const empresaEndereco = document.getElementById('empresaEndereco').value.trim();
            const empresaTelefone = document.getElementById('empresaTelefone').value.trim();
            const empresaEmail = document.getElementById('empresaEmail').value.trim();

            if (empresaCNPJ) {
                doc.text(`CNPJ: ${empresaCNPJ}`, margin, yPosition);
                yPosition += 6;
            }
            if (empresaEndereco) {
                doc.text(`Endere√ßo: ${empresaEndereco}`, margin, yPosition);
                yPosition += 6;
            }
            if (empresaTelefone) {
                doc.text(`Telefone: ${empresaTelefone}`, margin, yPosition);
                yPosition += 6;
            }
            if (empresaEmail) {
                doc.text(`E-mail: ${empresaEmail}`, margin, yPosition);
                yPosition += 6;
            }

            yPosition += 15;

            // Dados do cliente
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('CLIENTE:', margin, yPosition);
            yPosition += 10;

            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text(`Nome: ${clienteNome}`, margin, yPosition);
            yPosition += 6;

            const clienteEmail = document.getElementById('clienteEmail').value.trim();
            const clienteTelefone = document.getElementById('clienteTelefone').value.trim();

            if (clienteEmail) {
                doc.text(`E-mail: ${clienteEmail}`, margin, yPosition);
                yPosition += 6;
            }
            if (clienteTelefone) {
                doc.text(`Telefone: ${clienteTelefone}`, margin, yPosition);
                yPosition += 6;
            }

            yPosition += 20;

            // Cabe√ßalho da tabela
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('ITEM', margin, yPosition);
            doc.text('QTD', margin + 80, yPosition);
            doc.text('VALOR UNIT.', margin + 110, yPosition);
            doc.text('TOTAL', margin + 150, yPosition);
            
            // Linha abaixo do cabe√ßalho
            yPosition += 5;
            doc.setLineWidth(0.5);
            doc.line(margin, yPosition, pageWidth - margin, yPosition);
            yPosition += 10;

            // Itens
            doc.setFont(undefined, 'normal');
            let totalGeral = 0;

            itens.forEach((item, index) => {
                // Verificar se precisa de nova p√°gina
                if (yPosition > 250) {
                    doc.addPage();
                    yPosition = 30;
                }

                doc.text(`${index + 1}. ${item.descricao}`, margin, yPosition);
                doc.text(item.quantidade.toString(), margin + 85, yPosition);
                doc.text(`R$ ${item.valorUnitario.toFixed(2).replace('.', ',')}`, margin + 115, yPosition);
                doc.text(`R$ ${item.valorTotal.toFixed(2).replace('.', ',')}`, margin + 155, yPosition);
                
                totalGeral += item.valorTotal;
                yPosition += 8;
            });

            // Linha antes do total
            yPosition += 5;
            doc.line(margin, yPosition, pageWidth - margin, yPosition);
            yPosition += 15;

            // Total geral
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('TOTAL GERAL:', margin + 100, yPosition);
            doc.text(`R$ ${totalGeral.toFixed(2).replace('.', ',')}`, margin + 155, yPosition);

            yPosition += 25;

            // Observa√ß√µes
            const observacoes = document.getElementById('observacoes').value.trim();
            if (observacoes) {
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text('OBSERVA√á√ïES:', margin, yPosition);
                yPosition += 10;

                doc.setFontSize(10);
                doc.setFont(undefined, 'normal');
                const linhasObservacoes = doc.splitTextToSize(observacoes, pageWidth - 2 * margin);
                doc.text(linhasObservacoes, margin, yPosition);
                yPosition += linhasObservacoes.length * 5 + 10;
            }

            // Rodap√© simples
            yPosition = 280;
            doc.setFontSize(9);
            doc.setTextColor(100, 100, 100);
            doc.text('Este or√ßamento tem validade de 30 dias.', margin, yPosition);
            doc.text(`Gerado em ${dataFormatada}`, pageWidth - margin, yPosition, { align: 'right' });

            // Salvar o PDF
            const nomeArquivo = `Orcamento_${numeroOrcamento}_${clienteNome.replace(/\s+/g, '_')}.pdf`;
            doc.save(nomeArquivo);
        }

        // Formata√ß√£o autom√°tica de campos
        document.getElementById('empresaCNPJ').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/^(\d{2})(\d)/, '$1.$2');
            value = value.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
            value = value.replace(/\.(\d{3})(\d)/, '.$1/$2');
            value = value.replace(/(\d{4})(\d)/, '$1-$2');
            e.target.value = value;
        });

        document.getElementById('empresaTelefone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/^(\d{2})(\d)/, '($1) $2');
            value = value.replace(/(\d{5})(\d)/, '$1-$2');
            e.target.value = value;
        });

        document.getElementById('clienteTelefone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/^(\d{2})(\d)/, '($1) $2');
            value = value.replace(/(\d{5})(\d)/, '$1-$2');
            e.target.value = value;
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a74cbe11ea5cb6',t:'MTc1NDQwNzQ0OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
